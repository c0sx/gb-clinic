(this.webpackJsonpdoctor=this.webpackJsonpdoctor||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(22),s=n.n(a),o=n(18),u=n(16),i=n(7),p=n(6),b=n.n(p),j=n(15),d=n(21),f=function(e){return O(e)},O=function(e){return 401!==e.status||(document.location.href="/doctor/sign-in",!1)},l=function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/doctor/info");case 2:if(t=e.sent,!f(t)){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/doctor/sign-out"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=n(24),m=Object(h.a)((function(e){return e.doctor}),(function(e){return e.id})),v=n(3),w=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(u.c)(m),s=Object(i.g)();return Object(r.useEffect)((function(){a&&s.replace("/doctor/appointments")}),[s,a]),Object(r.useEffect)((function(){Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:s.replace("/doctor/appointments"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}),[s]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),n?Object(v.jsx)(o.b,{to:"/doctor/sign-in",children:"\u0412\u0445\u043e\u0434"}):null,a?Object(v.jsx)("a",{href:"/doctor/sign-in",onClick:x,children:"\u0412\u044b\u0445\u043e\u0434"}):null]})},y=n(10),k=n(8),g=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.abrupt("return",fetch("/api/doctor/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:r})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=Object(y.c)({name:"user",initialState:{id:0},reducers:{fillUser:function(e,t){e.id=t.payload.id}}}),C=S.actions,E=S.reducer,P=b.a.mark(J),U=b.a.mark(M),A=Object(y.b)("signInDoctor");function J(e){var t,n,r,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.username,r=t.password,a.next=3,Object(k.b)(g,{username:n,password:r});case 3:if((c=a.sent).ok){a.next=6;break}return a.abrupt("return");case 6:return a.next=8,Object(k.c)(C.fillUser({id:c.id}));case 8:document.location.href="/doctor";case 9:case"end":return a.stop()}}),P)}function M(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(A.type,J);case 2:case"end":return e.stop()}}),U)}var D=function(){var e=Object(r.useState)("doctor"),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)("12345"),s=Object(d.a)(a,2),o=s[0],i=s[1],p=Object(u.b)();return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),p(A({username:n,password:o}))},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(v.jsx)("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(v.jsx)("input",{type:"password",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(v.jsx)("div",{children:Object(v.jsx)("input",{type:"submit",value:"\u0412\u0445\u043e\u0434"})})]})})},H=n(46),I=function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/doctor/appointments");case 2:if(t=e.sent,!f(t)){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=Object(y.c)({name:"appointments",initialState:{appointments:[]},reducers:{fill:function(e,t){e.appointments=t.payload}}}),B=T.actions,F=T.reducer,N=b.a.mark(G),q=b.a.mark(K),z=Object(y.b)("getAppointmentsAsync");function G(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.b)(I);case 2:return e=t.sent,t.next=5,Object(k.c)(B.fill(e));case 5:case"end":return t.stop()}}),N)}function K(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(z.type,G);case 2:case"end":return e.stop()}}),q)}var L=Object(h.a)((function(e){return e.appointments}),(function(e){return e.appointments})),Q=b.a.mark(W),R=b.a.mark(X),V=Object(y.b)("getUserAsync");function W(){var e;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.b)(l);case 2:return e=t.sent,t.next=5,Object(k.c)(C.fillUser(e));case 5:case"end":return t.stop()}}),Q)}function X(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(V.type,W);case 2:case"end":return e.stop()}}),R)}var Y=function(){var e=Object(u.b)(),t=Object(u.c)(L),n=Object(u.c)(m);return Object(r.useEffect)((function(){e(V()),e(z())}),[e]),Object(v.jsxs)("div",{children:[n?Object(v.jsx)("a",{href:"/doctor/sign-in",onClick:x,children:"\u0412\u044b\u0445\u043e\u0434"}):null,t.length>0?Object(v.jsx)("ul",{children:t.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsxs)("div",{children:[e.surname,e.name,Object(H.a)(e.date,"dd.MM.yyyy HH:mm")]})},e.id)}))}):Object(v.jsx)("p",{children:"\u041d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"})]})},Z=function(){return Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{exact:!0,path:"/doctor",component:w}),Object(v.jsx)(i.b,{path:"/doctor/sign-in",component:D}),Object(v.jsx)(i.b,{path:"/doctor/appointments",component:Y}),Object(v.jsx)(i.a,{to:"/doctor"})]})},$=n(31),_=n(32),ee=b.a.mark(te);function te(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([Object(k.b)(X),Object(k.b)(M),Object(k.b)(K)]);case 2:case"end":return e.stop()}}),ee)}var ne=n(11),re=Object(ne.b)({doctor:E,appointments:F}),ce=Object(_.a)(),ae=[].concat(Object($.a)(Object(y.d)()),[ce]),se=Object(y.a)({reducer:re,middleware:ae});ce.run(te),s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(u.a,{store:se,children:Object(v.jsx)(o.a,{children:Object(v.jsx)(Z,{})})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.8f7295ee.chunk.js.map