(this.webpackJsonppatient=this.webpackJsonppatient||[]).push([[0],{59:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(29),s=n.n(c),i=n(24),u=n(17),o=n(12),p=n(3),j=n.n(p),b=n(13),d=n(16),O=function(e){return f(e)},f=function(e){return 401!==e.status||(document.location.href="/patient/sign-in",!1)},l=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/patient/info");case 2:if(t=e.sent,!O(t)){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/patient/sign-out"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=n(31),v=Object(h.a)((function(e){return e.patient}),(function(e){return e.id})),m=n(2),w=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(u.c)(v),s=Object(o.g)();return Object(r.useEffect)((function(){c&&s.replace("/patient/appointments")}),[s,c]),Object(r.useEffect)((function(){Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:s.replace("/patient/appointments"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(!0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}),[s]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),n?Object(m.jsx)(i.b,{to:"/patient/sign-in",children:"\u0412\u0445\u043e\u0434"}):null,n?Object(m.jsx)(i.b,{to:"/patient/sign-up",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}):null,c?Object(m.jsx)("a",{href:"/patient/sign-in",onClick:x,children:"\u0412\u044b\u0445\u043e\u0434"}):null]})},y=n(11),g=n(10),k=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.abrupt("return",fetch("/api/patient/sign-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:r})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=Object(y.c)({name:"user",initialState:{id:0},reducers:{fillUser:function(e,t){e.id=t.payload.id}}}),C=S.actions,P=S.reducer,I=j.a.mark(A),D=j.a.mark(B),M=Object(y.b)("signIn");function A(e){var t,n,r,a;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.username,r=t.password,c.next=3,Object(g.b)(k,{username:n,password:r});case 3:if((a=c.sent).ok){c.next=6;break}return c.abrupt("return");case 6:return c.next=8,Object(g.c)(C.fillUser({id:a.id}));case 8:document.location.href="/patient";case 9:case"end":return c.stop()}}),I)}function B(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(M.type,A);case 2:case"end":return e.stop()}}),D)}var T=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(d.a)(c,2),o=s[0],p=s[1],j=Object(u.b)();return Object(m.jsxs)("div",{children:[Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),j(M({username:n,password:o}))},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",value:o,onChange:function(e){return p(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"submit",value:"\u0412\u0445\u043e\u0434"})})]}),Object(m.jsx)(i.b,{to:"/patient/sign-up",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})},J=n(62),E=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,a=t.user,c=a.surname,s=a.name,i=a.dateOfBirth,e.abrupt("return",fetch("/api/patient/sign-up",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:r,surname:c,name:s,dateOfBirth:1e3*Object(J.a)(i)})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=n(60),U=j.a.mark(F),N=j.a.mark(z),q=Object(y.b)("signUp");function F(e){var t,n,r,a,c,s,i;return j.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,n=t.username,r=t.password,a=t.user,c=a.surname,s=a.name,i=a.dateOfBirth,console.log(i,Object(H.a)(i,"yyyy-MM-dd",new Date)),u.next=4,Object(g.b)(E,{username:n,password:r,user:{surname:c,name:s,dateOfBirth:Object(H.a)(i,"yyyy-MM-dd",new Date)}});case 4:if(u.sent.ok){u.next=7;break}return u.abrupt("return");case 7:document.location.href="/patient";case 8:case"end":return u.stop()}}),U)}function z(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(q.type,F);case 2:case"end":return e.stop()}}),N)}var G=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(d.a)(c,2),i=s[0],o=s[1],p=Object(r.useState)(""),j=Object(d.a)(p,2),b=j[0],O=j[1],f=Object(r.useState)(""),l=Object(d.a)(f,2),x=l[0],h=l[1],v=Object(r.useState)(""),w=Object(d.a)(v,2),y=w[0],g=w[1],k=Object(u.b)();return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),k(q({username:n,password:i,user:{surname:b,name:x,dateOfBirth:y}}))},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u041b\u043e\u0433\u0438\u043d"}),Object(m.jsx)("input",{type:"text",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsx)("input",{type:"password",value:i,onChange:function(e){return o(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),Object(m.jsx)("input",{type:"text",value:b,onChange:function(e){return O(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{type:"text",value:x,onChange:function(e){return h(e.target.value)}})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"}),Object(m.jsx)("input",{type:"date",value:y,onChange:function(e){return g(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("input",{type:"submit",value:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})},K=n(61),L=j.a.mark(V),Q=j.a.mark(W),R=Object(y.b)("getPatientInfoAsync");function V(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)(l);case 2:return e=t.sent,t.next=5,Object(g.c)(C.fillUser(e));case 5:case"end":return t.stop()}}),L)}function W(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(R.type,V);case 2:case"end":return e.stop()}}),Q)}var X=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/patient/appointments");case 2:if(t=e.sent,!O(t)){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(y.c)({name:"appointments",initialState:{appointments:[]},reducers:{fill:function(e,t){e.appointments=t.payload}}}),Z=Y.actions,$=Y.reducer,_=j.a.mark(ne),ee=j.a.mark(re),te=Object(y.b)("getAppointmentsAsync");function ne(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)(X);case 2:return e=t.sent,t.next=5,Object(g.c)(Z.fill(e));case 5:case"end":return t.stop()}}),_)}function re(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(te.type,ne);case 2:case"end":return e.stop()}}),ee)}var ae=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/patient/doctors");case 2:if(t=e.sent,!O(t)){e.next=5;break}return e.abrupt("return",t.json());case 5:return e.abrupt("return",Promise.reject());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=Object(y.c)({name:"doctors",initialState:{doctors:[]},reducers:{fill:function(e,t){e.doctors=t.payload}}}),se=ce.actions,ie=ce.reducer,ue=j.a.mark(je),oe=j.a.mark(be),pe=Object(y.b)("getDoctorsAsync");function je(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.b)(ae);case 2:return e=t.sent,t.next=5,Object(g.c)(se.fill(e));case 5:case"end":return t.stop()}}),ue)}function be(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(pe.type,je);case 2:case"end":return e.stop()}}),oe)}var de=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.doctorId,r=t.date,e.next=3,fetch("/api/patient/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorId:n,date:1e3*Object(J.a)(r)})});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=j.a.mark(xe),fe=j.a.mark(he),le=Object(y.b)("registerAppointmentAsync");function xe(e){var t,n,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.doctorId,r=t.date,a.next=3,Object(g.b)(de,{doctorId:n,date:r});case 3:return a.next=5,Object(g.c)(te());case 5:case"end":return a.stop()}}),Oe)}function he(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.d)(le.type,xe);case 2:case"end":return e.stop()}}),fe)}var ve=Object(h.a)((function(e){return e.doctors}),(function(e){return e.doctors})),me=Object(h.a)((function(e){return e.appointments}),(function(e){return e.appointments})),we=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(d.a)(c,2),i=s[0],o=s[1],p=Object(u.b)(),j=Object(u.c)(me),b=Object(u.c)(ve),O=Object(u.c)(v);Object(r.useEffect)((function(){p(R()),p(te()),p(pe())}),[p]);return Object(m.jsxs)("div",{children:[O?Object(m.jsx)("a",{href:"/patient/sign-in",onClick:x,children:"\u0412\u044b\u0445\u043e\u0434"}):null,Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation();var t=Object(H.a)(i,"HH:mm",new Date);p(le({doctorId:n,date:t}))},children:[Object(m.jsxs)("select",{required:!0,onChange:function(e){return a(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}),b.map((function(e){return Object(m.jsxs)("option",{value:e.id,children:[e.surname," ",e.name]},e.id)}))]}),Object(m.jsxs)("select",{value:i,required:!0,onChange:function(e){return o(e.target.value)},children:[Object(m.jsx)("option",{value:"",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}),Object(m.jsx)("option",{value:"10:30",children:"10:30"}),Object(m.jsx)("option",{value:"10:50",children:"10:50"}),Object(m.jsx)("option",{value:"13:30",children:"13:30"})]}),Object(m.jsx)("input",{type:"submit",value:"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]})]}),j.length>0?Object(m.jsx)("ul",{children:j.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsxs)("div",{children:[e.surname,e.name,Object(K.a)(e.date,"dd.MM.yyyy HH:mm")]})},e.id)}))}):Object(m.jsx)("p",{children:"\u041d\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0435\u0439"})]})},ye=function(){return Object(m.jsxs)(o.d,{children:[Object(m.jsx)(o.b,{exact:!0,path:"/patient",component:w}),Object(m.jsx)(o.b,{path:"/patient/sign-in",component:T}),Object(m.jsx)(o.b,{path:"/patient/sign-up",component:G}),Object(m.jsx)(o.b,{path:"/patient/appointments",component:we}),Object(m.jsx)(o.a,{to:"/patient"})]})},ge=n(46),ke=n(47),Se=j.a.mark(Ce);function Ce(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)([Object(g.b)(B),Object(g.b)(z),Object(g.b)(W),Object(g.b)(be),Object(g.b)(re),Object(g.b)(he)]);case 2:case"end":return e.stop()}}),Se)}var Pe=n(15),Ie=Object(Pe.b)({patient:P,doctors:ie,appointments:$}),De=Object(ke.a)(),Me=[].concat(Object(ge.a)(Object(y.d)()),[De]),Ae=Object(y.a)({reducer:Ie,middleware:Me});De.run(Ce),s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(u.a,{store:Ae,children:Object(m.jsx)(i.a,{children:Object(m.jsx)(ye,{})})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.8b201d6e.chunk.js.map